{% extends '../common/main.html' %}

{% load staticfiles %}

{% block title %} 文章列表 {% endblock %}

{% block content %}
    <div class="article_content">
        <table class="table table-bordered articles_table">
            <thead>
                <tr>
                    <th width="5%">序号</th>
                    <th width="15%">主题</th>
                    <th width="30%">创建时间</th>
                    <th width="50%">类型</th>
                </tr>
            </thead>
            {% for article in articles %}
                <tr>
                    <td>{{ article.id }}</td>
                    <td>{{ article.articleTitle }}</td>
                    <td>{{ article.createdTime | date:"Y-m-d H:i:s" }}</td>
                    <td>{{ article.articleCategory.categoryName }}</td>
                </tr>
            {% endfor %}
        </table>
        <nav aria-label="Page navigation" class="article_pagination">
            <ul class="pagination">
                <li>
                    <a href="#" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                {% for page in pageRange %}
                    <li><a href="/article/listArticles?pageIndex={{ page }}">{{ page }}</a></li>
                {% endfor %}
                <li>
                    <a href="#" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
{% endblock %}

{% block js %}
    <script type="text/javascript">
        $(function () {
            $(".main_nav ul li a").each(function () {
                var href = $(this).attr("href");
                console.log(href.indexOf("/article"));
                // indexOf 找不到返回-1
                if (href.indexOf("/article") > -1) {
                    $(this).parent().addClass('active');
                } else {
                    $(this).parent().removeClass('active');
                }
            });
        })
    </script>
{% endblock %}

{% block css %}
    <link type="text/css" rel="stylesheet" href="{% static 'css/article.css' %}"/>
{% endblock %}